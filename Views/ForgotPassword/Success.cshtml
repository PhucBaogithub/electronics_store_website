@{
    ViewData["Title"] = "Đặt lại mật khẩu thành công";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card shadow-lg border-0">
                <div class="card-header bg-success text-white text-center py-4">
                    <div class="success-icon mb-3">
                        <i class="fas fa-check-circle fa-4x"></i>
                    </div>
                    <h3 class="mb-0">Thành công!</h3>
                    <p class="mb-0 mt-2">Mật khẩu đã được đặt lại</p>
                </div>
                
                <div class="card-body p-4 text-center">
                    @if (ViewBag.SuccessMessage != null)
                    {
                        <div class="alert alert-success border-0 mb-4">
                            <i class="fas fa-info-circle me-2"></i>
                            @ViewBag.SuccessMessage
                        </div>
                    }
                    
                    <div class="success-animation mb-4">
                        <div class="checkmark-circle">
                            <div class="checkmark"></div>
                        </div>
                    </div>
                    
                    <h5 class="text-success mb-3">
                        <i class="fas fa-shield-alt me-2"></i>
                        Mật khẩu của bạn đã được cập nhật thành công!
                    </h5>
                    
                    <p class="text-muted mb-4">
                        Bây giờ bạn có thể đăng nhập bằng mật khẩu mới. 
                        Để bảo mật tài khoản, hãy đăng xuất khỏi tất cả thiết bị khác.
                    </p>
                    
                    <div class="d-grid gap-2 mb-3">
                        <a asp-controller="Account" asp-action="Login" class="btn btn-success btn-lg">
                            <i class="fas fa-sign-in-alt me-2"></i>
                            Đăng nhập ngay
                        </a>
                    </div>
                    
                    <div class="row">
                        <div class="col-6">
                            <a asp-controller="Home" asp-action="Index" class="btn btn-outline-primary w-100">
                                <i class="fas fa-home me-2"></i>
                                Trang chủ
                            </a>
                        </div>
                        <div class="col-6">
                            <a asp-controller="Home" asp-action="Products" class="btn btn-outline-secondary w-100">
                                <i class="fas fa-shopping-bag me-2"></i>
                                Sản phẩm
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="card-footer bg-light text-center py-3">
                    <div class="security-tips">
                        <h6 class="text-muted mb-2">
                            <i class="fas fa-lightbulb me-2"></i>
                            Mẹo bảo mật
                        </h6>
                        <div class="row text-start">
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <i class="fas fa-check text-success me-1"></i>
                                    Sử dụng mật khẩu mạnh
                                </small>
                            </div>
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <i class="fas fa-check text-success me-1"></i>
                                    Không chia sẻ mật khẩu
                                </small>
                            </div>
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <i class="fas fa-check text-success me-1"></i>
                                    Đăng xuất sau khi sử dụng
                                </small>
                            </div>
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <i class="fas fa-check text-success me-1"></i>
                                    Cập nhật mật khẩu định kỳ
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Auto redirect after 10 seconds
            let countdown = 10;
            const redirectBtn = $('.btn-success');
            const originalText = redirectBtn.text();
            
            function updateCountdown() {
                if (countdown > 0) {
                    redirectBtn.html(`<i class="fas fa-sign-in-alt me-2"></i>Đăng nhập ngay (${countdown}s)`);
                    countdown--;
                    setTimeout(updateCountdown, 1000);
                } else {
                    window.location.href = '@Url.Action("Login", "Account")';
                }
            }
            
            // Start countdown after 3 seconds
            setTimeout(updateCountdown, 3000);
            
            // Stop countdown if user interacts
            $(document).on('click keypress mousemove', function() {
                countdown = 0;
                redirectBtn.html(originalText);
            });
            
            // Animate checkmark
            setTimeout(function() {
                $('.checkmark-circle').addClass('animate');
                $('.checkmark').addClass('animate');
            }, 500);
        });
    </script>
    
    <style>
        .card {
            border-radius: 15px;
            overflow: hidden;
        }
        
        .card-header {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        
        .success-icon {
            animation: bounceIn 1s ease-out;
        }
        
        .success-animation {
            position: relative;
            margin: 0 auto;
            width: 80px;
            height: 80px;
        }
        
        .checkmark-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #28a745;
            position: relative;
            background: #fff;
            transform: scale(0);
            transition: transform 0.3s ease-in-out;
        }
        
        .checkmark-circle.animate {
            transform: scale(1);
        }
        
        .checkmark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 20px;
            height: 35px;
            border: solid #28a745;
            border-width: 0 3px 3px 0;
            transform-origin: center;
            transition: transform 0.3s ease-in-out 0.3s;
        }
        
        .checkmark.animate {
            transform: translate(-50%, -50%) rotate(45deg) scale(1);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border: none;
            transition: all 0.3s ease;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
        }
        
        .security-tips {
            background: rgba(40, 167, 69, 0.1);
            border-radius: 8px;
            padding: 15px;
        }
        
        @@keyframes bounceIn {
            0% {
                transform: scale(0.3);
                opacity: 0;
            }
            50% {
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .alert {
            border-radius: 10px;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }
    </style>
}
